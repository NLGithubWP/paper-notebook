The Role of Distributed State

# Introduction

## Problems

In distributed systems, the **overall state** of the system is **partitioned among** server machines. But there are two potential issues.

1. some state must be **accessed in different fashion** than other states. 
2. if one machine crashes, it causes **some but not all of overstate to be lost.** 

## Solutions

The act of building a distributed system consists of making tradeoffs among various alternatives for managing the distributed state. 

And finally the paper concludes with the opinion that there is **no perfect solution to managing distributed state: each system designer must choose a particular approach based on the needs of his or her particular environment.**

# Why Is Distributed State Good?

Distributed state provides `performance, coherency, and reliability` in distributed system.

1. `Performance`: Each server read some state locally and avoid to retrieve information from remote machine.
2. `coherency`: Each party know something about the other so they can work together effectively. 
3. `reliability`: Replication of state guarantees the lost-recover. 

# Why Is Distributed State Bad?

Problems introduced by distributed state: `consistency, crash sensitivity, time and space overheads, and complexity`

## Consistency

**Problem**

Updating delay of duplicate copies could incur system inconsistent. 

**Solutions**

1. Detect stale data on use, and fetches the latest copy

2. Prevent inconsistency: Wait until the system reaches consistence. 

3. Tolerate inconsistency: reading stale data is allowed. 

## Crash sensitivity 

**Problem**

Backup machine cannot recover the full state data that had existed on the failed machine. And it is rare for state to be fully replicated. 

**Fully replication of state has some problems:**

1. communication protocols make sure sender can redirects message traffic to replacement machine after failure of primary machine. 
2. when failure occurs, communicaiton protocols can determine latest copies and bring out-of-date copies back to consistency without waiting for failed machine to reboot. 
3. when failed machine reboot, comminucatin protocols can bring its state back to consitency with others. 

## Time and Space overheads

**Problem**

Maintaining consistency incure the time overheads. , eg 

1. state must be checked every time the state is used, 
2. some party track distributed copies and notity other's abou the change. 

Distributed copies across cluster incure storage overheads. 

**Solutions**

The overhead problems are closely related to the **degree of sharing and rate of modification.** 

1. If information is not widely shared, then there need not be many copies of the information. 
2. If shared information is updated frequently, the cost of maintaining consistency becomes higher than the cost of communicating with a central server on each use; So we can use centralized approach to state management.

## Complexity

Dealling with consistency and debugging distributed system is complex, making it hard to tune system performance. 

# Case study - NFS

## Advantages of NFS



## Disadvantages of NFS



## NFS Summary



# Case study - Sprite File System

## Advantages

## Limitations

